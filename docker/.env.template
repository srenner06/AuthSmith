# =============================================================================
# AuthSmith Docker Configuration
# =============================================================================
#
# ??  IMPORTANT: THIS FILE CONTROLS ALL DOCKER CONFIGURATION!
#
# DO NOT edit docker-compose.yml to change configuration.
# Instead, copy this file to .env and customize the values here.
#
# GETTING STARTED:
#   1. cp .env.example .env
#   2. Edit .env with your values (or run setup-dev script)
#   3. docker-compose up -d
#
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_USER=authsmith
POSTGRES_PASSWORD=<GENERATE_SECURE_PASSWORD>
POSTGRES_DB=authsmith
DATABASE_PORT=5433
DATABASE_AUTO_MIGRATE=true

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_HTTP_PORT=8080
API_HTTPS_PORT=8081
ASPNETCORE_ENVIRONMENT=Development
ASPNETCORE_URLS=http://+:8080

# -----------------------------------------------------------------------------
# API Keys (Generate secure random keys!)
# -----------------------------------------------------------------------------
ADMIN_API_KEY=<GENERATE_SECURE_API_KEY>

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
JWT_ISSUER=https://localhost:8080
JWT_AUDIENCE=authsmith-api
JWT_EXPIRATION_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRATION_DAYS=7

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ALLOWED_ORIGIN_0=http://localhost:3000
CORS_ALLOWED_ORIGIN_1=http://localhost:5173
CORS_ALLOWED_ORIGIN_2=http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_ENABLED=true
REDIS_CONNECTION_STRING=redis:6379
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Email Configuration (MailHog for local development)
# -----------------------------------------------------------------------------
EMAIL_ENABLED=true
EMAIL_SMTP_HOST=mailhog
EMAIL_SMTP_PORT=1025
EMAIL_ENABLE_SSL=false
EMAIL_FROM_ADDRESS=noreply@authsmith.local
EMAIL_FROM_NAME=AuthSmith Dev
EMAIL_BASE_URL=http://localhost:8080
MAILHOG_SMTP_PORT=1025
MAILHOG_WEB_PORT=8025

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# Development: Higher limits for convenience
# Production: Use stricter limits (10, 5, 3)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_GENERAL_LIMIT=100
RATE_LIMIT_AUTH_LIMIT=30
RATE_LIMIT_REGISTRATION_LIMIT=30
RATE_LIMIT_PASSWORD_RESET_LIMIT=30
RATE_LIMIT_WINDOW_SECONDS=60

# -----------------------------------------------------------------------------
# OpenTelemetry / Jaeger Configuration
# -----------------------------------------------------------------------------
OTEL_ENABLED=true
OTEL_ENDPOINT=http://jaeger:4317
OTEL_SERVICE_NAME=AuthSmith
OTEL_SERVICE_VERSION=1.0.0-dev
OTEL_USE_CONSOLE_EXPORTER=false
OTEL_ENABLE_TRACING=true
OTEL_ENABLE_METRICS=true
JAEGER_UI_PORT=16686
JAEGER_OTLP_GRPC_PORT=4317
JAEGER_OTLP_HTTP_PORT=4318

# -----------------------------------------------------------------------------
# Logging Configuration (Serilog)
# -----------------------------------------------------------------------------
SERILOG_MIN_LEVEL=Information
SERILOG_MICROSOFT_LEVEL=Warning
SERILOG_SYSTEM_LEVEL=Warning
